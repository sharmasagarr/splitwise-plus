[{"filePath":"C:\\splitwise-plus\\client\\src\\navigations\\GroupsStack.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-negated-in-lhs","replacedBy":["no-unsafe-negation"]},{"ruleId":"no-catch-shadow","replacedBy":["no-shadow"]},{"ruleId":"handle-callback-err","replacedBy":[]},{"ruleId":"no-mixed-requires","replacedBy":[]},{"ruleId":"no-new-require","replacedBy":[]},{"ruleId":"no-path-concat","replacedBy":[]},{"ruleId":"no-restricted-modules","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]}]},{"filePath":"C:\\splitwise-plus\\client\\src\\screens\\CreateGroup.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FlatList' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"FlatList"},"fix":{"range":[130,143],"text":""},"desc":"Remove unused variable \"FlatList\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  FlatList,\r\n  ActivityIndicator,\r\n  Alert,\r\n  ScrollView,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n} from 'react-native';\r\nimport { useMutation, useLazyQuery } from '@apollo/client/react';\r\nimport { CREATE_GROUP, SEARCH_USERS } from '../graphql';\r\nimport type { NativeStackScreenProps } from '@react-navigation/native-stack';\r\nimport type { GroupsStackParamList } from '../navigations/GroupsStack';\r\n\r\ntype Props = NativeStackScreenProps<GroupsStackParamList, 'CreateGroup'>;\r\n\r\ntype UserResult = {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  imageUrl?: string;\r\n};\r\n\r\nconst CreateGroup: React.FC<Props> = ({ navigation }) => {\r\n  const [groupName, setGroupName] = useState('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedMembers, setSelectedMembers] = useState<UserResult[]>([]);\r\n\r\n  const [searchUsers, { data: searchData, loading: searching }] =\r\n    useLazyQuery<any>(SEARCH_USERS);\r\n\r\n  const [createGroup, { loading: creating }] = useMutation<any>(CREATE_GROUP, {\r\n    onCompleted: () => {\r\n      Alert.alert('Success', 'Group created successfully!');\r\n      navigation.goBack();\r\n    },\r\n    onError: (err: any) => {\r\n      Alert.alert('Error', err.message);\r\n    },\r\n  });\r\n\r\n  const handleSearch = useCallback(\r\n    (text: string) => {\r\n      setSearchQuery(text);\r\n      if (text.trim().length >= 2) {\r\n        searchUsers({ variables: { query: text.trim() } });\r\n      }\r\n    },\r\n    [searchUsers],\r\n  );\r\n\r\n  const addMember = (user: UserResult) => {\r\n    if (selectedMembers.find(m => m.id === user.id)) return;\r\n    setSelectedMembers(prev => [...prev, user]);\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const removeMember = (userId: string) => {\r\n    setSelectedMembers(prev => prev.filter(m => m.id !== userId));\r\n  };\r\n\r\n  const handleCreate = () => {\r\n    if (!groupName.trim()) {\r\n      Alert.alert('Validation Error', 'Group name cannot be empty');\r\n      return;\r\n    }\r\n    const emails = selectedMembers.map(m => m.email);\r\n    createGroup({\r\n      variables: { name: groupName.trim(), memberEmails: emails },\r\n    });\r\n  };\r\n\r\n  const searchResults = (searchData?.searchUsers || []).filter(\r\n    (u: UserResult) => !selectedMembers.find(m => m.id === u.id),\r\n  );\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      style={styles.container}\r\n      behavior={Platform.OS === 'ios' ? 'padding' : undefined}\r\n    >\r\n      <ScrollView contentContainerStyle={styles.content}>\r\n        <Text style={styles.label}>Group Name</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"e.g., Goa Trip 2026\"\r\n          value={groupName}\r\n          onChangeText={setGroupName}\r\n          placeholderTextColor=\"#94a3b8\"\r\n        />\r\n\r\n        <Text style={styles.label}>Add Members</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Search by email...\"\r\n          value={searchQuery}\r\n          onChangeText={handleSearch}\r\n          placeholderTextColor=\"#94a3b8\"\r\n          keyboardType=\"email-address\"\r\n          autoCapitalize=\"none\"\r\n        />\r\n\r\n        {searching && (\r\n          <ActivityIndicator\r\n            size=\"small\"\r\n            color=\"#667eea\"\r\n            style={styles.searchingIndicator}\r\n          />\r\n        )}\r\n\r\n        {searchQuery.length >= 2 && searchResults.length > 0 && (\r\n          <View style={styles.searchResults}>\r\n            {searchResults.map((user: UserResult) => (\r\n              <TouchableOpacity\r\n                key={user.id}\r\n                style={styles.searchResultItem}\r\n                onPress={() => addMember(user)}\r\n              >\r\n                <View style={styles.resultAvatar}>\r\n                  <Text style={styles.resultAvatarText}>\r\n                    {user.name.charAt(0).toUpperCase()}\r\n                  </Text>\r\n                </View>\r\n                <View style={styles.resultInfo}>\r\n                  <Text style={styles.resultName}>{user.name}</Text>\r\n                  <Text style={styles.resultEmail}>{user.email}</Text>\r\n                </View>\r\n                <Text style={styles.addIcon}>+</Text>\r\n              </TouchableOpacity>\r\n            ))}\r\n          </View>\r\n        )}\r\n\r\n        {searchQuery.length >= 2 &&\r\n          searchResults.length === 0 &&\r\n          !searching && <Text style={styles.noResults}>No users found</Text>}\r\n\r\n        {selectedMembers.length > 0 && (\r\n          <View style={styles.chipsSection}>\r\n            <Text style={styles.chipsLabel}>\r\n              Selected ({selectedMembers.length})\r\n            </Text>\r\n            <View style={styles.chipsContainer}>\r\n              {selectedMembers.map(member => (\r\n                <View key={member.id} style={styles.chip}>\r\n                  <Text style={styles.chipText}>{member.name}</Text>\r\n                  <TouchableOpacity onPress={() => removeMember(member.id)}>\r\n                    <Text style={styles.chipRemove}>Γ£ò</Text>\r\n                  </TouchableOpacity>\r\n                </View>\r\n              ))}\r\n            </View>\r\n          </View>\r\n        )}\r\n      </ScrollView>\r\n\r\n      <View style={styles.footer}>\r\n        <TouchableOpacity\r\n          style={[styles.createBtn, creating && styles.createBtnDisabled]}\r\n          onPress={handleCreate}\r\n          disabled={creating}\r\n        >\r\n          <Text style={styles.createBtnText}>\r\n            {creating ? 'Creating...' : 'Create Group'}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </KeyboardAvoidingView>\r\n  );\r\n};\r\n\r\nexport default CreateGroup;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, backgroundColor: '#f8fafc' },\r\n  content: { padding: 20, paddingBottom: 100 },\r\n  label: {\r\n    fontSize: 14,\r\n    fontWeight: '700',\r\n    color: '#475569',\r\n    marginBottom: 8,\r\n    marginTop: 16,\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#cbd5e1',\r\n    borderRadius: 12,\r\n    padding: 14,\r\n    fontSize: 16,\r\n    backgroundColor: '#fff',\r\n    color: '#1e293b',\r\n  },\r\n  searchingIndicator: { marginTop: 12 },\r\n  searchResults: {\r\n    marginTop: 8,\r\n    backgroundColor: '#fff',\r\n    borderRadius: 12,\r\n    borderWidth: 1,\r\n    borderColor: '#e2e8f0',\r\n    overflow: 'hidden',\r\n  },\r\n  searchResultItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    padding: 14,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#f1f5f9',\r\n  },\r\n  resultAvatar: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: 20,\r\n    backgroundColor: '#e0e7ff',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginRight: 12,\r\n  },\r\n  resultAvatarText: { fontSize: 16, fontWeight: '700', color: '#667eea' },\r\n  resultInfo: { flex: 1 },\r\n  resultName: { fontSize: 15, fontWeight: '600', color: '#1e293b' },\r\n  resultEmail: { fontSize: 13, color: '#64748b', marginTop: 2 },\r\n  addIcon: { fontSize: 22, color: '#667eea', fontWeight: '700' },\r\n  noResults: {\r\n    marginTop: 12,\r\n    color: '#94a3b8',\r\n    fontSize: 14,\r\n    textAlign: 'center',\r\n    fontStyle: 'italic',\r\n  },\r\n  chipsSection: { marginTop: 24 },\r\n  chipsLabel: {\r\n    fontSize: 14,\r\n    fontWeight: '700',\r\n    color: '#475569',\r\n    marginBottom: 10,\r\n  },\r\n  chipsContainer: { flexDirection: 'row', flexWrap: 'wrap', gap: 8 },\r\n  chip: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#e0e7ff',\r\n    paddingHorizontal: 14,\r\n    paddingVertical: 8,\r\n    borderRadius: 20,\r\n    gap: 6,\r\n  },\r\n  chipText: { fontSize: 14, color: '#3730a3', fontWeight: '600' },\r\n  chipRemove: { fontSize: 14, color: '#6366f1', fontWeight: '700' },\r\n  footer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    padding: 20,\r\n    backgroundColor: '#f8fafc',\r\n    borderTopWidth: 1,\r\n    borderTopColor: '#e2e8f0',\r\n  },\r\n  createBtn: {\r\n    backgroundColor: '#667eea',\r\n    padding: 16,\r\n    borderRadius: 12,\r\n    alignItems: 'center',\r\n  },\r\n  createBtnDisabled: { opacity: 0.6 },\r\n  createBtnText: { color: '#fff', fontSize: 16, fontWeight: '700' },\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-negated-in-lhs","replacedBy":["no-unsafe-negation"]},{"ruleId":"no-catch-shadow","replacedBy":["no-shadow"]},{"ruleId":"handle-callback-err","replacedBy":[]},{"ruleId":"no-mixed-requires","replacedBy":[]},{"ruleId":"no-new-require","replacedBy":[]},{"ruleId":"no-path-concat","replacedBy":[]},{"ruleId":"no-restricted-modules","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]}]},{"filePath":"C:\\splitwise-plus\\client\\src\\screens\\GroupDetail.tsx","messages":[{"ruleId":"react/no-unstable-nested-components","severity":1,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeΓÇÖs DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component ΓÇ£GroupDetailΓÇ¥ and pass data as props.","line":111,"column":22,"nodeType":"ArrowFunctionExpression","endLine":166,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  FlatList,\r\n  TouchableOpacity,\r\n  ActivityIndicator,\r\n  Alert,\r\n  Modal,\r\n  TextInput,\r\n} from 'react-native';\r\nimport { useQuery, useMutation } from '@apollo/client/react';\r\nimport {\r\n  GET_GROUP_DETAILS,\r\n  GET_GROUP_EXPENSES,\r\n  INVITE_TO_GROUP,\r\n} from '../graphql';\r\nimport type { NativeStackScreenProps } from '@react-navigation/native-stack';\r\nimport type { GroupsStackParamList } from '../navigations/GroupsStack';\r\n\r\ntype Props = NativeStackScreenProps<GroupsStackParamList, 'GroupDetail'>;\r\n\r\nconst GroupDetail: React.FC<Props> = ({ route }) => {\r\n  const { groupId } = route.params;\r\n\r\n  const {\r\n    data: groupData,\r\n    loading: loadingGroup,\r\n    refetch: refetchGroup,\r\n  } = useQuery<any>(GET_GROUP_DETAILS, { variables: { id: groupId } });\r\n\r\n  const { data: expensesData, loading: loadingExpenses } = useQuery<any>(\r\n    GET_GROUP_EXPENSES,\r\n    { variables: { groupId } },\r\n  );\r\n\r\n  const [inviteModalVisible, setInviteModalVisible] = useState(false);\r\n  const [inviteEmail, setInviteEmail] = useState('');\r\n\r\n  const [inviteToGroup, { loading: inviting }] = useMutation<any>(\r\n    INVITE_TO_GROUP,\r\n    {\r\n      onCompleted: () => {\r\n        setInviteModalVisible(false);\r\n        setInviteEmail('');\r\n        Alert.alert('Success', 'Invitation sent!');\r\n      },\r\n      onError: (err: any) => {\r\n        Alert.alert('Error', err.message);\r\n      },\r\n    },\r\n  );\r\n\r\n  const handleInvite = () => {\r\n    if (!inviteEmail.trim()) {\r\n      Alert.alert('Error', 'Email cannot be empty');\r\n      return;\r\n    }\r\n    inviteToGroup({ variables: { groupId, email: inviteEmail.trim() } });\r\n  };\r\n\r\n  if (loadingGroup && !groupData) {\r\n    return (\r\n      <View style={styles.center}>\r\n        <ActivityIndicator size=\"large\" color=\"#667eea\" />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  const group = groupData?.getGroupDetails;\r\n  const expenses = expensesData?.getGroupExpenses || [];\r\n\r\n  if (!group) {\r\n    return (\r\n      <View style={styles.center}>\r\n        <Text style={styles.errorText}>Group not found</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  const renderMember = ({ item }: any) => (\r\n    <View style={styles.memberItem}>\r\n      <View style={styles.memberAvatar}>\r\n        <Text style={styles.memberAvatarText}>\r\n          {item.user.name.charAt(0).toUpperCase()}\r\n        </Text>\r\n      </View>\r\n      <View style={styles.memberInfo}>\r\n        <Text style={styles.memberName}>{item.user.name}</Text>\r\n        <Text style={styles.memberEmail}>{item.user.email}</Text>\r\n      </View>\r\n      <Text style={styles.memberRole}>{item.role}</Text>\r\n    </View>\r\n  );\r\n\r\n  const renderExpense = ({ item }: any) => (\r\n    <View style={styles.expenseCard}>\r\n      <View style={styles.expenseInfo}>\r\n        <Text style={styles.expenseDesc}>{item.note || 'Expense'}</Text>\r\n        <Text style={styles.expenseBy}>\r\n          by {item.createdBy?.name || 'Unknown'}\r\n        </Text>\r\n      </View>\r\n      <Text style={styles.expenseAmount}>\r\n        Γé╣{parseFloat(item.totalAmount).toFixed(2)}\r\n      </Text>\r\n    </View>\r\n  );\r\n\r\n  const ListHeader = () => (\r\n    <View>\r\n      {/* Group Info */}\r\n      <View style={styles.groupHeader}>\r\n        <View style={styles.groupIcon}>\r\n          <Text style={styles.groupIconText}>\r\n            {group.name?.charAt(0).toUpperCase()}\r\n          </Text>\r\n        </View>\r\n        <Text style={styles.groupName}>{group.name}</Text>\r\n        {group.description && (\r\n          <Text style={styles.groupDescription}>{group.description}</Text>\r\n        )}\r\n      </View>\r\n\r\n      {/* Members Section */}\r\n      <View style={styles.sectionHeader}>\r\n        <Text style={styles.sectionTitle}>\r\n          Members ({group.members.length})\r\n        </Text>\r\n        <TouchableOpacity\r\n          style={styles.inviteBtn}\r\n          onPress={() => setInviteModalVisible(true)}\r\n        >\r\n          <Text style={styles.inviteBtnText}>+ Invite</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <FlatList\r\n        data={group.members}\r\n        keyExtractor={(item: any) => item.id}\r\n        renderItem={renderMember}\r\n        scrollEnabled={false}\r\n        style={styles.membersList}\r\n      />\r\n\r\n      {/* Expenses Section */}\r\n      <View style={styles.sectionHeader}>\r\n        <Text style={styles.sectionTitle}>Expenses ({expenses.length})</Text>\r\n      </View>\r\n\r\n      {loadingExpenses && (\r\n        <ActivityIndicator\r\n          size=\"small\"\r\n          color=\"#667eea\"\r\n          style={styles.expenseLoader}\r\n        />\r\n      )}\r\n\r\n      {!loadingExpenses && expenses.length === 0 && (\r\n        <View style={styles.emptyExpenses}>\r\n          <Text style={styles.emptyText}>No expenses yet</Text>\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <FlatList\r\n        data={expenses}\r\n        keyExtractor={(item: any) => item.id}\r\n        renderItem={renderExpense}\r\n        ListHeaderComponent={ListHeader}\r\n        refreshing={loadingGroup}\r\n        onRefresh={refetchGroup}\r\n        contentContainerStyle={styles.listContent}\r\n      />\r\n\r\n      {/* Invite Modal */}\r\n      <Modal visible={inviteModalVisible} animationType=\"fade\" transparent>\r\n        <View style={styles.modalOverlay}>\r\n          <View style={styles.modalContent}>\r\n            <Text style={styles.modalTitle}>Invite Member</Text>\r\n            <TextInput\r\n              style={styles.modalInput}\r\n              placeholder=\"Enter email address\"\r\n              value={inviteEmail}\r\n              onChangeText={setInviteEmail}\r\n              keyboardType=\"email-address\"\r\n              autoCapitalize=\"none\"\r\n              placeholderTextColor=\"#94a3b8\"\r\n            />\r\n            <View style={styles.modalActions}>\r\n              <TouchableOpacity\r\n                style={[styles.modalBtn, styles.modalBtnCancel]}\r\n                onPress={() => setInviteModalVisible(false)}\r\n                disabled={inviting}\r\n              >\r\n                <Text style={styles.modalBtnCancelText}>Cancel</Text>\r\n              </TouchableOpacity>\r\n              <TouchableOpacity\r\n                style={[styles.modalBtn, styles.modalBtnSend]}\r\n                onPress={handleInvite}\r\n                disabled={inviting}\r\n              >\r\n                <Text style={styles.modalBtnSendText}>\r\n                  {inviting ? 'Sending...' : 'Send Invite'}\r\n                </Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default GroupDetail;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, backgroundColor: '#f8fafc' },\r\n  center: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n  errorText: { fontSize: 16, color: '#ef4444' },\r\n  listContent: { paddingBottom: 40 },\r\n  groupHeader: {\r\n    alignItems: 'center',\r\n    paddingVertical: 28,\r\n    paddingHorizontal: 20,\r\n    backgroundColor: '#fff',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#e2e8f0',\r\n  },\r\n  groupIcon: {\r\n    width: 72,\r\n    height: 72,\r\n    borderRadius: 36,\r\n    backgroundColor: '#e0e7ff',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginBottom: 12,\r\n  },\r\n  groupIconText: { fontSize: 30, fontWeight: '700', color: '#667eea' },\r\n  groupName: { fontSize: 24, fontWeight: '800', color: '#1e293b' },\r\n  groupDescription: {\r\n    fontSize: 14,\r\n    color: '#64748b',\r\n    marginTop: 4,\r\n    textAlign: 'center',\r\n  },\r\n  sectionHeader: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 16,\r\n  },\r\n  sectionTitle: { fontSize: 18, fontWeight: '700', color: '#1e293b' },\r\n  inviteBtn: {\r\n    backgroundColor: '#667eea',\r\n    paddingHorizontal: 14,\r\n    paddingVertical: 8,\r\n    borderRadius: 8,\r\n  },\r\n  inviteBtnText: { color: '#fff', fontWeight: '700', fontSize: 13 },\r\n  membersList: { marginHorizontal: 16 },\r\n  memberItem: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n    padding: 14,\r\n    borderRadius: 10,\r\n    marginBottom: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#f1f5f9',\r\n  },\r\n  memberAvatar: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: 20,\r\n    backgroundColor: '#e0e7ff',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginRight: 12,\r\n  },\r\n  memberAvatarText: { fontSize: 16, fontWeight: '700', color: '#667eea' },\r\n  memberInfo: { flex: 1 },\r\n  memberName: { fontSize: 15, fontWeight: '600', color: '#1e293b' },\r\n  memberEmail: { fontSize: 12, color: '#64748b', marginTop: 2 },\r\n  memberRole: {\r\n    fontSize: 12,\r\n    fontWeight: '600',\r\n    color: '#667eea',\r\n    textTransform: 'capitalize',\r\n    backgroundColor: '#eef2ff',\r\n    paddingHorizontal: 10,\r\n    paddingVertical: 4,\r\n    borderRadius: 6,\r\n  },\r\n  expenseCard: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n    padding: 16,\r\n    marginHorizontal: 16,\r\n    borderRadius: 10,\r\n    marginBottom: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#f1f5f9',\r\n  },\r\n  expenseInfo: { flex: 1 },\r\n  expenseDesc: { fontSize: 15, fontWeight: '600', color: '#1e293b' },\r\n  expenseBy: { fontSize: 12, color: '#64748b', marginTop: 4 },\r\n  expenseAmount: { fontSize: 17, fontWeight: '700', color: '#10b981' },\r\n  expenseLoader: { padding: 20 },\r\n  emptyExpenses: { padding: 20, alignItems: 'center' },\r\n  emptyText: { fontSize: 14, color: '#94a3b8', fontStyle: 'italic' },\r\n  modalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(15, 23, 42, 0.5)',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 20,\r\n  },\r\n  modalContent: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 16,\r\n    padding: 24,\r\n    width: '100%',\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: '800',\r\n    color: '#1e293b',\r\n    marginBottom: 16,\r\n  },\r\n  modalInput: {\r\n    borderWidth: 1,\r\n    borderColor: '#cbd5e1',\r\n    borderRadius: 10,\r\n    padding: 14,\r\n    fontSize: 16,\r\n    backgroundColor: '#f8fafc',\r\n    color: '#1e293b',\r\n    marginBottom: 16,\r\n  },\r\n  modalActions: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-end',\r\n    gap: 12,\r\n  },\r\n  modalBtn: {\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 12,\r\n    borderRadius: 10,\r\n    minWidth: 90,\r\n    alignItems: 'center',\r\n  },\r\n  modalBtnCancel: { backgroundColor: '#f1f5f9' },\r\n  modalBtnSend: { backgroundColor: '#667eea' },\r\n  modalBtnCancelText: { color: '#475569', fontWeight: '700' },\r\n  modalBtnSendText: { color: '#fff', fontWeight: '700' },\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-negated-in-lhs","replacedBy":["no-unsafe-negation"]},{"ruleId":"no-catch-shadow","replacedBy":["no-shadow"]},{"ruleId":"handle-callback-err","replacedBy":[]},{"ruleId":"no-mixed-requires","replacedBy":[]},{"ruleId":"no-new-require","replacedBy":[]},{"ruleId":"no-path-concat","replacedBy":[]},{"ruleId":"no-restricted-modules","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]}]},{"filePath":"C:\\splitwise-plus\\client\\src\\screens\\Groups.tsx","messages":[{"ruleId":"react/no-unstable-nested-components","severity":1,"message":"Do not define components during render. React will see a new component type on every render and destroy the entire subtreeΓÇÖs DOM nodes and state (https://reactjs.org/docs/reconciliation.html#elements-of-different-types). Instead, move this component definition out of the parent component ΓÇ£GroupsΓÇ¥ and pass data as props.","line":107,"column":22,"nodeType":"ArrowFunctionExpression","endLine":155,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  FlatList,\r\n  TouchableOpacity,\r\n  ActivityIndicator,\r\n  Alert,\r\n  Modal,\r\n  TextInput,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n} from 'react-native';\r\nimport { useQuery, useMutation } from '@apollo/client/react';\r\nimport {\r\n  GET_GROUPS,\r\n  GET_MY_INVITES,\r\n  JOIN_GROUP,\r\n  RESPOND_TO_INVITE,\r\n} from '../graphql';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport type { NativeStackNavigationProp } from '@react-navigation/native-stack';\r\nimport type { GroupsStackParamList } from '../navigations/GroupsStack';\r\n\r\ntype NavProp = NativeStackNavigationProp<GroupsStackParamList, 'GroupsList'>;\r\n\r\nconst Groups = () => {\r\n  const navigation = useNavigation<NavProp>();\r\n\r\n  const { data, loading, refetch } = useQuery<any>(GET_GROUPS, {\r\n    fetchPolicy: 'cache-and-network',\r\n  });\r\n\r\n  const {\r\n    data: invitesData,\r\n    loading: loadingInvites,\r\n    refetch: refetchInvites,\r\n  } = useQuery<any>(GET_MY_INVITES, {\r\n    fetchPolicy: 'cache-and-network',\r\n  });\r\n\r\n  const [joinGroup, { loading: joining }] = useMutation<any>(JOIN_GROUP, {\r\n    onCompleted: () => {\r\n      setJoinModalVisible(false);\r\n      setJoinToken('');\r\n      refetch();\r\n      Alert.alert('Success', 'Successfully joined the group!');\r\n    },\r\n    onError: (err: any) => {\r\n      Alert.alert('Error', err.message);\r\n    },\r\n  });\r\n\r\n  const [respondToInvite] = useMutation<any>(RESPOND_TO_INVITE, {\r\n    onCompleted: () => {\r\n      refetch();\r\n      refetchInvites();\r\n    },\r\n    onError: (err: any) => {\r\n      Alert.alert('Error', err.message);\r\n    },\r\n  });\r\n\r\n  const [joinModalVisible, setJoinModalVisible] = useState(false);\r\n  const [joinToken, setJoinToken] = useState('');\r\n\r\n  const handleJoinGroup = () => {\r\n    if (!joinToken.trim()) {\r\n      Alert.alert('Validation Error', 'Invite token cannot be empty');\r\n      return;\r\n    }\r\n    joinGroup({ variables: { token: joinToken.trim() } });\r\n  };\r\n\r\n  const handleAcceptInvite = (inviteId: string) => {\r\n    respondToInvite({ variables: { inviteId, accept: true } });\r\n  };\r\n\r\n  const handleRejectInvite = (inviteId: string) => {\r\n    Alert.alert(\r\n      'Reject Invite',\r\n      'Are you sure you want to reject this invitation?',\r\n      [\r\n        { text: 'Cancel', style: 'cancel' },\r\n        {\r\n          text: 'Reject',\r\n          style: 'destructive',\r\n          onPress: () =>\r\n            respondToInvite({ variables: { inviteId, accept: false } }),\r\n        },\r\n      ],\r\n    );\r\n  };\r\n\r\n  if (loading && !data) {\r\n    return (\r\n      <View style={styles.center}>\r\n        <ActivityIndicator size=\"large\" color=\"#667eea\" />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  const groups = data?.getGroups || [];\r\n  const invites = invitesData?.getMyInvites || [];\r\n\r\n  const ListHeader = () => (\r\n    <View>\r\n      {/* Pending Invitations */}\r\n      {invites.length > 0 && (\r\n        <View style={styles.invitesSection}>\r\n          <Text style={styles.invitesSectionTitle}>\r\n            Pending Invitations ({invites.length})\r\n          </Text>\r\n          {invites.map((invite: any) => (\r\n            <View key={invite.id} style={styles.inviteCard}>\r\n              <View style={styles.inviteInfo}>\r\n                <Text style={styles.inviteGroupName}>\r\n                  {invite.group?.name || 'Unknown Group'}\r\n                </Text>\r\n                <Text style={styles.inviteMembers}>\r\n                  {invite.group?.members?.length || 0} members\r\n                </Text>\r\n              </View>\r\n              <View style={styles.inviteActions}>\r\n                <TouchableOpacity\r\n                  style={styles.acceptBtn}\r\n                  onPress={() => handleAcceptInvite(invite.id)}\r\n                >\r\n                  <Text style={styles.acceptBtnText}>Accept</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity\r\n                  style={styles.rejectBtn}\r\n                  onPress={() => handleRejectInvite(invite.id)}\r\n                >\r\n                  <Text style={styles.rejectBtnText}>Reject</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            </View>\r\n          ))}\r\n        </View>\r\n      )}\r\n\r\n      {groups.length === 0 && (\r\n        <View style={styles.emptyContainer}>\r\n          <Text style={styles.emptyText}>\r\n            You are not part of any groups yet.\r\n          </Text>\r\n          <Text style={styles.emptySubText}>\r\n            Create one to get started splitting expenses!\r\n          </Text>\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Text style={styles.title}>Your Groups</Text>\r\n        <View style={styles.headerButtons}>\r\n          <TouchableOpacity\r\n            style={[styles.addButton, styles.joinButton]}\r\n            onPress={() => setJoinModalVisible(true)}\r\n          >\r\n            <Text style={styles.addButtonText}>Join</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity\r\n            style={styles.addButton}\r\n            onPress={() => navigation.navigate('CreateGroup')}\r\n          >\r\n            <Text style={styles.addButtonText}>+ New</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </View>\r\n\r\n      <FlatList\r\n        data={groups}\r\n        keyExtractor={(item: any) => item.id}\r\n        refreshing={loading || loadingInvites}\r\n        onRefresh={() => {\r\n          refetch();\r\n          refetchInvites();\r\n        }}\r\n        ListHeaderComponent={ListHeader}\r\n        contentContainerStyle={styles.listContainer}\r\n        renderItem={({ item }) => (\r\n          <TouchableOpacity\r\n            style={styles.groupCard}\r\n            onPress={() =>\r\n              navigation.navigate('GroupDetail', { groupId: item.id })\r\n            }\r\n            activeOpacity={0.7}\r\n          >\r\n            <View style={styles.groupIconContainer}>\r\n              <Text style={styles.groupIconText}>\r\n                {item.name.charAt(0).toUpperCase()}\r\n              </Text>\r\n            </View>\r\n            <View style={styles.groupInfoContainer}>\r\n              <Text style={styles.groupName}>{item.name}</Text>\r\n              <Text style={styles.groupInfo}>\r\n                {item.members.length} members\r\n              </Text>\r\n            </View>\r\n            <Text style={styles.chevron}>ΓÇ║</Text>\r\n          </TouchableOpacity>\r\n        )}\r\n      />\r\n\r\n      {/* Join Group Modal */}\r\n      <Modal visible={joinModalVisible} animationType=\"fade\" transparent>\r\n        <KeyboardAvoidingView\r\n          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\r\n          style={styles.modalOverlay}\r\n        >\r\n          <View style={styles.modalContent}>\r\n            <Text style={styles.modalTitle}>Join Group</Text>\r\n\r\n            <TextInput\r\n              style={styles.input}\r\n              placeholder=\"Invite Token\"\r\n              value={joinToken}\r\n              onChangeText={setJoinToken}\r\n              placeholderTextColor=\"#999\"\r\n              autoCapitalize=\"none\"\r\n            />\r\n\r\n            <View style={styles.modalActions}>\r\n              <TouchableOpacity\r\n                style={[styles.btn, styles.btnCancel]}\r\n                onPress={() => setJoinModalVisible(false)}\r\n                disabled={joining}\r\n              >\r\n                <Text style={styles.btnTextCancel}>Cancel</Text>\r\n              </TouchableOpacity>\r\n              <TouchableOpacity\r\n                style={[styles.btn, styles.btnCreate]}\r\n                onPress={handleJoinGroup}\r\n                disabled={joining}\r\n              >\r\n                <Text style={styles.btnTextCreate}>\r\n                  {joining ? 'Joining...' : 'Join Group'}\r\n                </Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        </KeyboardAvoidingView>\r\n      </Modal>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default Groups;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, backgroundColor: '#f8fafc' },\r\n  center: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n    borderBottomWidth: 1,\r\n    borderColor: '#e2e8f0',\r\n  },\r\n  headerButtons: { flexDirection: 'row', gap: 8 },\r\n  title: { fontSize: 24, fontWeight: '800', color: '#1e293b' },\r\n  addButton: {\r\n    backgroundColor: '#667eea',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 10,\r\n    borderRadius: 8,\r\n    justifyContent: 'center',\r\n  },\r\n  joinButton: { backgroundColor: '#10b981' },\r\n  addButtonText: { color: '#fff', fontWeight: '700', fontSize: 14 },\r\n  emptyContainer: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 40,\r\n  },\r\n  emptyText: {\r\n    color: '#475569',\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    marginBottom: 8,\r\n  },\r\n  emptySubText: { color: '#94a3b8', fontSize: 14, textAlign: 'center' },\r\n  listContainer: { padding: 16 },\r\n  groupCard: {\r\n    flexDirection: 'row',\r\n    backgroundColor: '#fff',\r\n    padding: 16,\r\n    borderRadius: 12,\r\n    marginBottom: 12,\r\n    shadowColor: '#000',\r\n    shadowOpacity: 0.05,\r\n    shadowRadius: 8,\r\n    elevation: 2,\r\n    borderWidth: 1,\r\n    borderColor: '#f1f5f9',\r\n    alignItems: 'center',\r\n  },\r\n  groupIconContainer: {\r\n    width: 50,\r\n    height: 50,\r\n    borderRadius: 25,\r\n    backgroundColor: '#e0e7ff',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginRight: 16,\r\n  },\r\n  groupIconText: { fontSize: 20, fontWeight: 'bold', color: '#667eea' },\r\n  groupInfoContainer: { flex: 1 },\r\n  groupName: {\r\n    fontSize: 18,\r\n    fontWeight: '700',\r\n    color: '#1e293b',\r\n    marginBottom: 4,\r\n  },\r\n  groupInfo: { color: '#64748b', fontSize: 14 },\r\n  chevron: { fontSize: 24, color: '#cbd5e1', fontWeight: '300' },\r\n  invitesSection: {\r\n    marginBottom: 20,\r\n    backgroundColor: '#fffbeb',\r\n    borderRadius: 12,\r\n    padding: 16,\r\n    borderWidth: 1,\r\n    borderColor: '#fde68a',\r\n  },\r\n  invitesSectionTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '700',\r\n    color: '#92400e',\r\n    marginBottom: 12,\r\n  },\r\n  inviteCard: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    backgroundColor: '#fff',\r\n    padding: 14,\r\n    borderRadius: 10,\r\n    marginBottom: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#fde68a',\r\n  },\r\n  inviteInfo: { flex: 1 },\r\n  inviteGroupName: { fontSize: 15, fontWeight: '600', color: '#1e293b' },\r\n  inviteMembers: { fontSize: 12, color: '#64748b', marginTop: 2 },\r\n  inviteActions: { flexDirection: 'row', gap: 8 },\r\n  acceptBtn: {\r\n    backgroundColor: '#10b981',\r\n    paddingHorizontal: 14,\r\n    paddingVertical: 8,\r\n    borderRadius: 8,\r\n  },\r\n  acceptBtnText: { color: '#fff', fontWeight: '700', fontSize: 13 },\r\n  rejectBtn: {\r\n    backgroundColor: '#fee2e2',\r\n    paddingHorizontal: 14,\r\n    paddingVertical: 8,\r\n    borderRadius: 8,\r\n  },\r\n  rejectBtnText: { color: '#dc2626', fontWeight: '700', fontSize: 13 },\r\n  modalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(15, 23, 42, 0.5)',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 20,\r\n  },\r\n  modalContent: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 16,\r\n    padding: 24,\r\n    width: '100%',\r\n  },\r\n  modalTitle: {\r\n    fontSize: 20,\r\n    fontWeight: '800',\r\n    marginBottom: 20,\r\n    color: '#1e293b',\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#cbd5e1',\r\n    borderRadius: 10,\r\n    padding: 14,\r\n    marginBottom: 16,\r\n    fontSize: 16,\r\n    backgroundColor: '#f8fafc',\r\n    color: '#1e293b',\r\n  },\r\n  modalActions: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-end',\r\n    gap: 12,\r\n    marginTop: 8,\r\n  },\r\n  btn: {\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 14,\r\n    borderRadius: 10,\r\n    minWidth: 100,\r\n    alignItems: 'center',\r\n  },\r\n  btnCancel: { backgroundColor: '#f1f5f9' },\r\n  btnCreate: { backgroundColor: '#667eea' },\r\n  btnTextCancel: { color: '#475569', fontWeight: '700', fontSize: 15 },\r\n  btnTextCreate: { color: '#fff', fontWeight: '700', fontSize: 15 },\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"no-negated-in-lhs","replacedBy":["no-unsafe-negation"]},{"ruleId":"no-catch-shadow","replacedBy":["no-shadow"]},{"ruleId":"handle-callback-err","replacedBy":[]},{"ruleId":"no-mixed-requires","replacedBy":[]},{"ruleId":"no-new-require","replacedBy":[]},{"ruleId":"no-path-concat","replacedBy":[]},{"ruleId":"no-restricted-modules","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]}]}]
